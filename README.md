# tinper官网说明

### 整体说明

未采用`hexo`,`jeykll`等第三方博客系统，原因如下：

- 样式`.styl`文件采用模板语法，不利于维护
- 模板多为`blog`列表形式，可选范围小
- 模板修改需要学习模板引擎（多为后端模板引擎语法），操作复杂
- 增加功能有局限性
- 不方便扩展或直接使用`neoui`框架内容
- 多官网需要多仓库管理

借鉴`hexo`，根据`tinper`1主4子官网业务需求，做了单一仓库，合理目录管理的输出机制：

- 支持多文件形态(md & 模板引擎)输出静态页
- 最大程度复用`iuap-design`文档
- 支持模板扩展
- 原生使用neoui

### 完成情况

- 实现目前业务需求的输出机制
- 实现官网主体内容部署

### 目录结构

| 名称       | 内容         | 备注              |
| -------- | ---------- | --------------- |
| assets   | 静态及第三方资源   | 存放样式&图片&JS文件    |
| bin      | 执行文件       | 用于md文档转换命令      |
| conf     | webIDE依赖文件 | 待迁移             |
| data     | 页面渲染需要的数据  |                 |
| dist     | 输出目录       |                 |
| download | 定制下载输出目录   |                 |
| layout   | 页面模板       |                 |
| partial  | 页面公用部分(头尾) |                 |
| src      | 源文件        | 存放md，html等未渲染文件 |
| entry.js | 定制下载入口文件   |                 |

### 编辑说明

- 官网文档及内容页面均存放于`src`目录下，合理按照官网内容层级分配。可增删html或md文件
  - md文档：增加md文档，需要在同一目录下的`SUMMARY.md`增加对应md文档链接
  - html：html文件可在`layout`选择所需模板或自行创建模板
- 默认开发分支：
  - 目前在临时`menu`分支，本周演示完毕稳定后切换为`dev`分支
- 官网线上分支：
  - `release`分支

### 输出流程

- 本地输出：项目根目录下执行

  ```
  $ npm run mark
  或
  $ node bin/index.js
  ```

  以上命令完成：

  - md转换为html，嵌入对应layout布局模板
  - html文件执行文件渲染，获取data数据
  - 输出最终dist目录

- 本地调试:

  ```
  $ npm run reload
  或
  $ node bin/reload.js
  ```

  以上命令：

  - 默认开启8002端口
  - `src`目录文件修改后，会自动执行输出并刷新浏览器（刷新功能有bug）

- 官网部署

  ```
  $ npm run deploy
  ```

### 后续工作

- 官网主要内容补充：
  - 产品首页
  - `uba`文档
  - `react`文档
- 确认`demo`机制
- 官网样式更新：
  - 修正目前样式bug
  - 引入css3动画效果
- 官网机制：
  - 解决目前个别页面引入公共头部数据获取bug
  - 解决开发`reload`命令页面刷新bug
  - 增加配置API，方便后续增加模板
  - 封装命令行工具